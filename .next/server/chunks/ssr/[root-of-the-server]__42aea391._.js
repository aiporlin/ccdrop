module.exports=[84425,(a,b,c)=>{function d(a,b,c,d){return Math.round(a/c)+" "+d+(b>=1.5*c?"s":"")}b.exports=function(a,b){b=b||{};var c,e,f,g,h=typeof a;if("string"===h&&a.length>0){var i=a;if(!((i=String(i)).length>100)){var j=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(j){var k=parseFloat(j[1]);switch((j[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*k;case"weeks":case"week":case"w":return 6048e5*k;case"days":case"day":case"d":return 864e5*k;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*k;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*k;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*k;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return k;default:break}}}return}if("number"===h&&isFinite(a)){return b.long?(e=Math.abs(c=a))>=864e5?d(c,e,864e5,"day"):e>=36e5?d(c,e,36e5,"hour"):e>=6e4?d(c,e,6e4,"minute"):e>=1e3?d(c,e,1e3,"second"):c+" ms":(g=Math.abs(f=a))>=864e5?Math.round(f/864e5)+"d":g>=36e5?Math.round(f/36e5)+"h":g>=6e4?Math.round(f/6e4)+"m":g>=1e3?Math.round(f/1e3)+"s":f+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},11017,(a,b,c)=>{b.exports=function(b){function c(a){let b,e,f,g=null;function h(...a){if(!h.enabled)return;let d=Number(new Date);h.diff=d-(b||d),h.prev=b,h.curr=d,b=d,a[0]=c.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");let e=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(b,d)=>{if("%%"===b)return"%";e++;let f=c.formatters[d];if("function"==typeof f){let c=a[e];b=f.call(h,c),a.splice(e,1),e--}return b}),c.formatArgs.call(h,a),(h.log||c.log).apply(h,a)}return h.namespace=a,h.useColors=c.useColors(),h.color=c.selectColor(a),h.extend=d,h.destroy=c.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==g?g:(e!==c.namespaces&&(e=c.namespaces,f=c.enabled(a)),f),set:a=>{g=a}}),"function"==typeof c.init&&c.init(h),h}function d(a,b){let d=c(this.namespace+(void 0===b?":":b)+a);return d.log=this.log,d}function e(a,b){let c=0,d=0,e=-1,f=0;for(;c<a.length;)if(d<b.length&&(b[d]===a[c]||"*"===b[d]))"*"===b[d]?(e=d,f=c):c++,d++;else{if(-1===e)return!1;d=e+1,c=++f}for(;d<b.length&&"*"===b[d];)d++;return d===b.length}return c.debug=c,c.default=c,c.coerce=function(a){return a instanceof Error?a.stack||a.message:a},c.disable=function(){let a=[...c.names,...c.skips.map(a=>"-"+a)].join(",");return c.enable(""),a},c.enable=function(a){for(let b of(c.save(a),c.namespaces=a,c.names=[],c.skips=[],("string"==typeof a?a:"").trim().replace(/\s+/g,",").split(",").filter(Boolean)))"-"===b[0]?c.skips.push(b.slice(1)):c.names.push(b)},c.enabled=function(a){for(let b of c.skips)if(e(a,b))return!1;for(let b of c.names)if(e(a,b))return!0;return!1},c.humanize=a.r(84425),c.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(b).forEach(a=>{c[a]=b[a]}),c.names=[],c.skips=[],c.formatters={},c.selectColor=function(a){let b=0;for(let c=0;c<a.length;c++)b=(b<<5)-b+a.charCodeAt(c)|0;return c.colors[Math.abs(b)%c.colors.length]},c.enable(c.load()),c}},70722,(a,b,c)=>{b.exports=a.x("tty",()=>require("tty"))},46786,(a,b,c)=>{b.exports=a.x("os",()=>require("os"))},55858,(a,b,c)=>{"use strict";b.exports=(a,b=process.argv)=>{let c=a.startsWith("-")?"":1===a.length?"-":"--",d=b.indexOf(c+a),e=b.indexOf("--");return -1!==d&&(-1===e||d<e)}},73083,(a,b,c)=>{"use strict";let d,e=a.r(46786),f=a.r(70722),g=a.r(55858),{env:h}=process;function i(a){return 0!==a&&{level:a,hasBasic:!0,has256:a>=2,has16m:a>=3}}function j(a,b){if(0===d)return 0;if(g("color=16m")||g("color=full")||g("color=truecolor"))return 3;if(g("color=256"))return 2;if(a&&!b&&void 0===d)return 0;let c=d||0;if("dumb"===h.TERM)return c;{let a=e.release().split(".");return Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}}g("no-color")||g("no-colors")||g("color=false")||g("color=never")?d=0:(g("color")||g("colors")||g("color=true")||g("color=always"))&&(d=1),"FORCE_COLOR"in h&&(d="true"===h.FORCE_COLOR?1:"false"===h.FORCE_COLOR?0:0===h.FORCE_COLOR.length?1:Math.min(parseInt(h.FORCE_COLOR,10),3)),b.exports={supportsColor:function(a){return i(j(a,a&&a.isTTY))},stdout:i(j(!0,f.isatty(1))),stderr:i(j(!0,f.isatty(2)))}},81454,(a,b,c)=>{let d=a.r(70722),e=a.r(24361);c.init=function(a){a.inspectOpts={};let b=Object.keys(c.inspectOpts);for(let d=0;d<b.length;d++)a.inspectOpts[b[d]]=c.inspectOpts[b[d]]},c.log=function(...a){return process.stderr.write(e.formatWithOptions(c.inspectOpts,...a)+"\n")},c.formatArgs=function(a){let{namespace:d,useColors:e}=this;if(e){let c=this.color,e="\x1b[3"+(c<8?c:"8;5;"+c),f=`  ${e};1m${d} \u001B[0m`;a[0]=f+a[0].split("\n").join("\n"+f),a.push(e+"m+"+b.exports.humanize(this.diff)+"\x1b[0m")}else a[0]=(c.inspectOpts.hideDate?"":new Date().toISOString()+" ")+d+" "+a[0]},c.save=function(a){a?process.env.DEBUG=a:delete process.env.DEBUG},c.load=function(){return process.env.DEBUG},c.useColors=function(){return"colors"in c.inspectOpts?!!c.inspectOpts.colors:d.isatty(process.stderr.fd)},c.destroy=e.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),c.colors=[6,2,3,4,5,1];try{let b=a.r(73083);b&&(b.stderr||b).level>=2&&(c.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(a){}c.inspectOpts=Object.keys(process.env).filter(a=>/^debug_/i.test(a)).reduce((a,b)=>{let c=b.substring(6).toLowerCase().replace(/_([a-z])/g,(a,b)=>b.toUpperCase()),d=process.env[b];return d=!!/^(yes|on|true|enabled)$/i.test(d)||!/^(no|off|false|disabled)$/i.test(d)&&("null"===d?null:Number(d)),a[c]=d,a},{}),b.exports=a.r(11017)(c);let{formatters:f}=b.exports;f.o=function(a){return this.inspectOpts.colors=this.useColors,e.inspect(a,this.inspectOpts).split("\n").map(a=>a.trim()).join(" ")},f.O=function(a){return this.inspectOpts.colors=this.useColors,e.inspect(a,this.inspectOpts)}},47522,(a,b,c)=>{c.formatArgs=function(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+b.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;a.splice(1,0,c,"color: inherit");let d=0,e=0;a[0].replace(/%[a-zA-Z%]/g,a=>{"%%"!==a&&(d++,"%c"===a&&(e=d))}),a.splice(e,0,c)},c.save=function(a){try{a?c.storage.setItem("debug",a):c.storage.removeItem("debug")}catch(a){}},c.load=function(){let a;try{a=c.storage.getItem("debug")||c.storage.getItem("DEBUG")}catch(a){}return!a&&"undefined"!=typeof process&&"env"in process&&(a=process.env.DEBUG),a},c.useColors=function(){let a;return!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof navigator&&navigator.userAgent&&(a=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(a[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},c.storage=function(){try{return localStorage}catch(a){}}(),c.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),c.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],c.log=console.debug||console.log||(()=>{}),b.exports=a.r(11017)(c);let{formatters:d}=b.exports;d.j=function(a){try{return JSON.stringify(a)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}},35290,(a,b,c)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?b.exports=a.r(47522):b.exports=a.r(81454)},49409,(a,b,c)=>{b.exports=function(){if("undefined"==typeof globalThis)return null;var a={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return a.RTCPeerConnection?a:null}},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},98326,(a,b,c)=>{b.exports=a.r(54799).randomBytes},88947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},27699,(a,b,c)=>{b.exports=a.x("events",()=>require("events"))},46995,(a,b,c)=>{b.exports=a.r(88947)},874,(a,b,c)=>{b.exports=a.x("buffer",()=>require("buffer"))},82666,(a,b,c)=>{"use strict";function d(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function e(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?d(Object(c),!0).forEach(function(b){var d,e,g;d=a,e=b,g=c[b],(e=f(e))in d?Object.defineProperty(d,e,{value:g,enumerable:!0,configurable:!0,writable:!0}):d[e]=g}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):d(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function f(a){var b=function(a,b){if("object"!=typeof a||null===a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:String(b)}var g=a.r(874).Buffer,h=a.r(24361).inspect,i=h&&h.custom||"inspect";b.exports=function(){var a;function b(){if(!(this instanceof b))throw TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}return a=[{key:"push",value:function(a){var b={data:a,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(a){var b={data:a,next:this.head};0===this.length&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(0!==this.length){var a=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,a}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(a){if(0===this.length)return"";for(var b=this.head,c=""+b.data;b=b.next;)c+=a+b.data;return c}},{key:"concat",value:function(a){if(0===this.length)return g.alloc(0);for(var b,c,d=g.allocUnsafe(a>>>0),e=this.head,f=0;e;)b=e.data,c=f,g.prototype.copy.call(b,d,c),f+=e.data.length,e=e.next;return d}},{key:"consume",value:function(a,b){var c;return a<this.head.data.length?(c=this.head.data.slice(0,a),this.head.data=this.head.data.slice(a)):c=a===this.head.data.length?this.shift():b?this._getString(a):this._getBuffer(a),c}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(a){var b=this.head,c=1,d=b.data;for(a-=d.length;b=b.next;){var e=b.data,f=a>e.length?e.length:a;if(f===e.length?d+=e:d+=e.slice(0,a),0==(a-=f)){f===e.length?(++c,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=e.slice(f));break}++c}return this.length-=c,d}},{key:"_getBuffer",value:function(a){var b=g.allocUnsafe(a),c=this.head,d=1;for(c.data.copy(b),a-=c.data.length;c=c.next;){var e=c.data,f=a>e.length?e.length:a;if(e.copy(b,b.length-a,0,f),0==(a-=f)){f===e.length?(++d,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=e.slice(f));break}++d}return this.length-=d,b}},{key:i,value:function(a,b){return h(this,e(e({},b),{},{depth:0,customInspect:!1}))}}],function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,f(d.key),d)}}(b.prototype,a),Object.defineProperty(b,"prototype",{writable:!1}),b}()},6268,(a,b,c)=>{"use strict";function d(a,b){f(a,b),e(a)}function e(a){(!a._writableState||a._writableState.emitClose)&&(!a._readableState||a._readableState.emitClose)&&a.emit("close")}function f(a,b){a.emit("error",b)}b.exports={destroy:function(a,b){var c=this,g=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return g||h?b?b(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(f,this,a)):process.nextTick(f,this,a)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(a){!b&&a?c._writableState?c._writableState.errorEmitted?process.nextTick(e,c):(c._writableState.errorEmitted=!0,process.nextTick(d,c,a)):process.nextTick(d,c,a):b?(process.nextTick(e,c),b(a)):process.nextTick(e,c)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(a,b){var c=a._readableState,d=a._writableState;c&&c.autoDestroy||d&&d.autoDestroy?a.destroy(b):a.emit("error",b)}}},86609,(a,b,c)=>{"use strict";let d={};function e(a,b,c){c||(c=Error);class e extends c{constructor(a,c,d){super("string"==typeof b?b:b(a,c,d))}}e.prototype.name=c.name,e.prototype.code=a,d[a]=e}function f(a,b){if(!Array.isArray(a))return`of ${b} ${String(a)}`;{let c=a.length;return(a=a.map(a=>String(a)),c>2)?`one of ${b} ${a.slice(0,c-1).join(", ")}, or `+a[c-1]:2===c?`one of ${b} ${a[0]} or ${a[1]}`:`of ${b} ${a[0]}`}}e("ERR_INVALID_OPT_VALUE",function(a,b){return'The value "'+b+'" is invalid for option "'+a+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(a,b,c){var d,e,g,h;let i,j;if("string"==typeof b&&(d="not ",b.substr(0,d.length)===d)?(i="must not be",b=b.replace(/^not /,"")):i="must be",e=" argument",(void 0===g||g>a.length)&&(g=a.length),a.substring(g-e.length,g)===e)j=`The ${a} ${i} ${f(b,"type")}`;else{let c=("number"!=typeof h&&(h=0),h+1>a.length||-1===a.indexOf(".",h))?"argument":"property";j=`The "${a}" ${c} ${i} ${f(b,"type")}`}return j+`. Received type ${typeof c}`},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),b.exports.codes=d},68044,(a,b,c)=>{"use strict";var d=a.r(86609).codes.ERR_INVALID_OPT_VALUE;b.exports={getHighWaterMark:function(a,b,c,e){var f=null!=b.highWaterMark?b.highWaterMark:e?b[c]:null;if(null!=f){if(!(isFinite(f)&&Math.floor(f)===f)||f<0)throw new d(e?c:"highWaterMark",f);return Math.floor(f)}return a.objectMode?16:16384}}},7915,(a,b,c)=>{"function"==typeof Object.create?b.exports=function(a,b){b&&(a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:b.exports=function(a,b){if(b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}}},18919,(a,b,c)=>{try{var d=a.r(24361);if("function"!=typeof d.inherits)throw"";b.exports=d.inherits}catch(c){b.exports=a.r(7915)}},83557,(a,b,c)=>{b.exports=a.r(24361).deprecate},20676,(a,b,c)=>{"use strict";function d(a){var b=this;this.next=null,this.entry=null,this.finish=function(){var c=b,d=a,e=c.entry;for(c.entry=null;e;){var f=e.callback;d.pendingcb--,f(void 0),e=e.next}d.corkedRequestsFree.next=c}}b.exports=y,y.WritableState=x;var e,f,g={deprecate:a.r(83557)},h=a.r(46995),i=a.r(874).Buffer,j=a.g.Uint8Array||function(){},k=a.r(6268),l=a.r(68044).getHighWaterMark,m=a.r(86609).codes,n=m.ERR_INVALID_ARG_TYPE,o=m.ERR_METHOD_NOT_IMPLEMENTED,p=m.ERR_MULTIPLE_CALLBACK,q=m.ERR_STREAM_CANNOT_PIPE,r=m.ERR_STREAM_DESTROYED,s=m.ERR_STREAM_NULL_VALUES,t=m.ERR_STREAM_WRITE_AFTER_END,u=m.ERR_UNKNOWN_ENCODING,v=k.errorOrDestroy;function w(){}function x(b,c,f){e=e||a.r(71164),b=b||{},"boolean"!=typeof f&&(f=c instanceof e),this.objectMode=!!b.objectMode,f&&(this.objectMode=this.objectMode||!!b.writableObjectMode),this.highWaterMark=l(this,b,"writableHighWaterMark",f),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var g=!1===b.decodeStrings;this.decodeStrings=!g,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){!function(a,b){var c=a._writableState,d=c.sync,e=c.writecb;if("function"!=typeof e)throw new p;if(c.writing=!1,c.writecb=null,c.length-=c.writelen,c.writelen=0,b)--c.pendingcb,d?(process.nextTick(e,b),process.nextTick(E,a,c),a._writableState.errorEmitted=!0,v(a,b)):(e(b),a._writableState.errorEmitted=!0,v(a,b),E(a,c));else{var f=C(c)||a.destroyed;f||c.corked||c.bufferProcessing||!c.bufferedRequest||B(a,c),d?process.nextTick(A,a,c,f,e):A(a,c,f,e)}}(c,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==b.emitClose,this.autoDestroy=!!b.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}a.r(18919)(y,h),x.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};try{Object.defineProperty(x.prototype,"buffer",{get:g.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(a){}function y(b){var c=this instanceof(e=e||a.r(71164));if(!c&&!f.call(y,this))return new y(b);this._writableState=new x(b,this,c),this.writable=!0,b&&("function"==typeof b.write&&(this._write=b.write),"function"==typeof b.writev&&(this._writev=b.writev),"function"==typeof b.destroy&&(this._destroy=b.destroy),"function"==typeof b.final&&(this._final=b.final)),h.call(this)}function z(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,b.destroyed?b.onwrite(new r("write")):c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function A(a,b,c,d){var e,f;c||(e=a,0===(f=b).length&&f.needDrain&&(f.needDrain=!1,e.emit("drain"))),b.pendingcb--,d(),E(a,b)}function B(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){var e=Array(b.bufferedRequestCount),f=b.corkedRequestsFree;f.entry=c;for(var g=0,h=!0;c;)e[g]=c,c.isBuf||(h=!1),c=c.next,g+=1;e.allBuffers=h,z(a,b,!0,b.length,e,"",f.finish),b.pendingcb++,b.lastBufferedRequest=null,f.next?(b.corkedRequestsFree=f.next,f.next=null):b.corkedRequestsFree=new d(b),b.bufferedRequestCount=0}else{for(;c;){var i=c.chunk,j=c.encoding,k=c.callback,l=b.objectMode?1:i.length;if(z(a,b,!1,l,i,j,k),c=c.next,b.bufferedRequestCount--,b.writing)break}null===c&&(b.lastBufferedRequest=null)}b.bufferedRequest=c,b.bufferProcessing=!1}function C(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function D(a,b){a._final(function(c){b.pendingcb--,c&&v(a,c),b.prefinished=!0,a.emit("prefinish"),E(a,b)})}function E(a,b){var c=C(b);if(c&&(b.prefinished||b.finalCalled||("function"!=typeof a._final||b.destroyed?(b.prefinished=!0,a.emit("prefinish")):(b.pendingcb++,b.finalCalled=!0,process.nextTick(D,a,b))),0===b.pendingcb&&(b.finished=!0,a.emit("finish"),b.autoDestroy))){var d=a._readableState;(!d||d.autoDestroy&&d.endEmitted)&&a.destroy()}return c}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(a){return!!f.call(this,a)||this===y&&a&&a._writableState instanceof x}})):f=function(a){return a instanceof this},y.prototype.pipe=function(){v(this,new q)},y.prototype.write=function(a,b,c){var d,e,f,g,h,k,l,m=this._writableState,o=!1,p=!m.objectMode&&(d=a,i.isBuffer(d)||d instanceof j);return(p&&!i.isBuffer(a)&&(e=a,a=i.from(e)),"function"==typeof b&&(c=b,b=null),p?b="buffer":b||(b=m.defaultEncoding),"function"!=typeof c&&(c=w),m.ending)?(f=c,v(this,g=new t),process.nextTick(f,g)):(p||(h=a,k=c,null===h?l=new s:"string"==typeof h||m.objectMode||(l=new n("chunk",["string","Buffer"],h)),!l||(v(this,l),process.nextTick(k,l),0)))&&(m.pendingcb++,o=function(a,b,c,d,e,f){if(!c){var g,h,j=(g=d,h=e,b.objectMode||!1===b.decodeStrings||"string"!=typeof g||(g=i.from(g,h)),g);d!==j&&(c=!0,e="buffer",d=j)}var k=b.objectMode?1:d.length;b.length+=k;var l=b.length<b.highWaterMark;if(l||(b.needDrain=!0),b.writing||b.corked){var m=b.lastBufferedRequest;b.lastBufferedRequest={chunk:d,encoding:e,isBuf:c,callback:f,next:null},m?m.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else z(a,b,!1,k,d,e,f);return l}(this,m,p,a,b,c)),o},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.bufferProcessing||!a.bufferedRequest||B(this,a))},y.prototype.setDefaultEncoding=function(a){if("string"==typeof a&&(a=a.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())>-1))throw new u(a);return this._writableState.defaultEncoding=a,this},Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(a,b,c){c(new o("_write()"))},y.prototype._writev=null,y.prototype.end=function(a,b,c){var d,e,f,g=this._writableState;return"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),null!=a&&this.write(a,b),g.corked&&(g.corked=1,this.uncork()),g.ending||(d=this,e=g,f=c,e.ending=!0,E(d,e),f&&(e.finished?process.nextTick(f):d.once("finish",f)),e.ended=!0,d.writable=!1),this},Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}}),y.prototype.destroy=k.destroy,y.prototype._undestroy=k.undestroy,y.prototype._destroy=function(a,b){b(a)}},71164,(a,b,c)=>{"use strict";var d=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};b.exports=j;var e=a.r(13597),f=a.r(20676);a.r(18919)(j,e);for(var g=d(f.prototype),h=0;h<g.length;h++){var i=g[h];j.prototype[i]||(j.prototype[i]=f.prototype[i])}function j(a){if(!(this instanceof j))return new j(a);e.call(this,a),f.call(this,a),this.allowHalfOpen=!0,a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",k)))}function k(){this._writableState.ended||process.nextTick(l,this)}function l(a){a.end()}Object.defineProperty(j.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(j.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(j.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}})},74898,(a,b,c)=>{var d=a.r(874),e=d.Buffer;function f(a,b){for(var c in a)b[c]=a[c]}function g(a,b,c){return e(a,b,c)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?b.exports=d:(f(d,c),c.Buffer=g),g.prototype=Object.create(e.prototype),f(e,g),g.from=function(a,b,c){if("number"==typeof a)throw TypeError("Argument must not be a number");return e(a,b,c)},g.alloc=function(a,b,c){if("number"!=typeof a)throw TypeError("Argument must be a number");var d=e(a);return void 0!==b?"string"==typeof c?d.fill(b,c):d.fill(b):d.fill(0),d},g.allocUnsafe=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return e(a)},g.allocUnsafeSlow=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return d.SlowBuffer(a)}},5177,(a,b,c)=>{"use strict";var d=a.r(74898).Buffer,e=d.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function f(a){var b;switch(this.encoding=function(a){var b=function(a){var b;if(!a)return"utf8";for(;;)switch(a){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return a;default:if(b)return;a=(""+a).toLowerCase(),b=!0}}(a);if("string"!=typeof b&&(d.isEncoding===e||!e(a)))throw Error("Unknown encoding: "+a);return b||a}(a),this.encoding){case"utf16le":this.text=i,this.end=j,b=4;break;case"utf8":this.fillLast=h,b=4;break;case"base64":this.text=k,this.end=l,b=3;break;default:this.write=m,this.end=n;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(b)}function g(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function h(a){var b=this.lastTotal-this.lastNeed,c=function(a,b,c){if((192&b[0])!=128)return a.lastNeed=0,"�";if(a.lastNeed>1&&b.length>1){if((192&b[1])!=128)return a.lastNeed=1,"�";if(a.lastNeed>2&&b.length>2&&(192&b[2])!=128)return a.lastNeed=2,"�"}}(this,a,0);return void 0!==c?c:this.lastNeed<=a.length?(a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(a.copy(this.lastChar,b,0,a.length),this.lastNeed-=a.length)}function i(a,b){if((a.length-b)%2==0){var c=a.toString("utf16le",b);if(c){var d=c.charCodeAt(c.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",b,a.length-1)}function j(a){var b=a&&a.length?this.write(a):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,c)}return b}function k(a,b){var c=(a.length-b)%3;return 0===c?a.toString("base64",b):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",b,a.length-c))}function l(a){var b=a&&a.length?this.write(a):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function m(a){return a.toString(this.encoding)}function n(a){return a&&a.length?this.write(a):""}c.StringDecoder=f,f.prototype.write=function(a){var b,c;if(0===a.length)return"";if(this.lastNeed){if(void 0===(b=this.fillLast(a)))return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""},f.prototype.end=function(a){var b=a&&a.length?this.write(a):"";return this.lastNeed?b+"�":b},f.prototype.text=function(a,b){var c=function(a,b,c){var d=b.length-1;if(d<c)return 0;var e=g(b[d]);return e>=0?(e>0&&(a.lastNeed=e-1),e):--d<c||-2===e?0:(e=g(b[d]))>=0?(e>0&&(a.lastNeed=e-2),e):--d<c||-2===e?0:(e=g(b[d]))>=0?(e>0&&(2===e?e=0:a.lastNeed=e-3),e):0}(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;var d=a.length-(c-this.lastNeed);return a.copy(this.lastChar,0,d),a.toString("utf8",b,d)},f.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},42603,(a,b,c)=>{"use strict";var d=a.r(86609).codes.ERR_STREAM_PREMATURE_CLOSE;function e(){}b.exports=function a(b,c,f){if("function"==typeof c)return a(b,null,c);c||(c={}),g=f||e,h=!1,f=function(){if(!h){h=!0;for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];g.apply(this,b)}};var g,h,i=c.readable||!1!==c.readable&&b.readable,j=c.writable||!1!==c.writable&&b.writable,k=function(){b.writable||m()},l=b._writableState&&b._writableState.finished,m=function(){j=!1,l=!0,i||f.call(b)},n=b._readableState&&b._readableState.endEmitted,o=function(){i=!1,n=!0,j||f.call(b)},p=function(a){f.call(b,a)},q=function(){var a;return i&&!n?(b._readableState&&b._readableState.ended||(a=new d),f.call(b,a)):j&&!l?(b._writableState&&b._writableState.ended||(a=new d),f.call(b,a)):void 0},r=function(){b.req.on("finish",m)};return b.setHeader&&"function"==typeof b.abort?(b.on("complete",m),b.on("abort",q),b.req?r():b.on("request",r)):j&&!b._writableState&&(b.on("end",k),b.on("close",k)),b.on("end",o),b.on("finish",m),!1!==c.error&&b.on("error",p),b.on("close",q),function(){b.removeListener("complete",m),b.removeListener("abort",q),b.removeListener("request",r),b.req&&b.req.removeListener("finish",m),b.removeListener("end",k),b.removeListener("close",k),b.removeListener("finish",m),b.removeListener("end",o),b.removeListener("error",p),b.removeListener("close",q)}}},5184,(a,b,c)=>{"use strict";function d(a,b,c){var d;return(b="symbol"==typeof(d=function(a,b){if("object"!=typeof a||null===a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"))?d:String(d))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e,f=a.r(42603),g=Symbol("lastResolve"),h=Symbol("lastReject"),i=Symbol("error"),j=Symbol("ended"),k=Symbol("lastPromise"),l=Symbol("handlePromise"),m=Symbol("stream");function n(a,b){return{value:a,done:b}}function o(a){var b=a[g];if(null!==b){var c=a[m].read();null!==c&&(a[k]=null,a[g]=null,a[h]=null,b(n(c,!1)))}}function p(a){process.nextTick(o,a)}var q=Object.getPrototypeOf(function(){}),r=Object.setPrototypeOf((d(e={get stream(){return this[m]},next:function(){var a,b,c=this,d=this[i];if(null!==d)return Promise.reject(d);if(this[j])return Promise.resolve(n(void 0,!0));if(this[m].destroyed)return new Promise(function(a,b){process.nextTick(function(){c[i]?b(c[i]):a(n(void 0,!0))})});var e=this[k];if(e)b=new Promise((a=this,function(b,c){e.then(function(){if(a[j])return void b(n(void 0,!0));a[l](b,c)},c)}));else{var f=this[m].read();if(null!==f)return Promise.resolve(n(f,!1));b=new Promise(this[l])}return this[k]=b,b}},Symbol.asyncIterator,function(){return this}),d(e,"return",function(){var a=this;return new Promise(function(b,c){a[m].destroy(null,function(a){if(a)return void c(a);b(n(void 0,!0))})})}),e),q);b.exports=function(a){var b,c=Object.create(r,(d(b={},m,{value:a,writable:!0}),d(b,g,{value:null,writable:!0}),d(b,h,{value:null,writable:!0}),d(b,i,{value:null,writable:!0}),d(b,j,{value:a._readableState.endEmitted,writable:!0}),d(b,l,{value:function(a,b){var d=c[m].read();d?(c[k]=null,c[g]=null,c[h]=null,a(n(d,!1))):(c[g]=a,c[h]=b)},writable:!0}),b));return c[k]=null,f(a,function(a){if(a&&"ERR_STREAM_PREMATURE_CLOSE"!==a.code){var b=c[h];null!==b&&(c[k]=null,c[g]=null,c[h]=null,b(a)),c[i]=a;return}var d=c[g];null!==d&&(c[k]=null,c[g]=null,c[h]=null,d(n(void 0,!0))),c[j]=!0}),a.on("readable",p.bind(null,c)),c}},39916,(a,b,c)=>{"use strict";function d(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}h.done?b(i):Promise.resolve(i).then(d,e)}function e(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}var f=a.r(86609).codes.ERR_INVALID_ARG_TYPE;b.exports=function(a,b,c){if(b&&"function"==typeof b.next)g=b;else if(b&&b[Symbol.asyncIterator])g=b[Symbol.asyncIterator]();else if(b&&b[Symbol.iterator])g=b[Symbol.iterator]();else throw new f("iterable",["Iterable"],b);var g,h=new a(function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?e(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||null===a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:String(b)}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):e(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({objectMode:!0},c)),i=!1;function j(){return k.apply(this,arguments)}function k(){var a;return a=function*(){try{var a=yield g.next(),b=a.value;a.done?h.push(null):h.push((yield b))?j():i=!1}catch(a){h.destroy(a)}},(k=function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function h(a){d(g,e,f,h,i,"next",a)}function i(a){d(g,e,f,h,i,"throw",a)}h(void 0)})}).apply(this,arguments)}return h._read=function(){i||(i=!0,j())},h}},13597,(a,b,c)=>{"use strict";b.exports=y,y.ReadableState=x,a.r(27699).EventEmitter;var d,e,f,g,h,i=function(a,b){return a.listeners(b).length},j=a.r(46995),k=a.r(874).Buffer,l=a.g.Uint8Array||function(){},m=a.r(24361);e=m&&m.debuglog?m.debuglog("stream"):function(){};var n=a.r(82666),o=a.r(6268),p=a.r(68044).getHighWaterMark,q=a.r(86609).codes,r=q.ERR_INVALID_ARG_TYPE,s=q.ERR_STREAM_PUSH_AFTER_EOF,t=q.ERR_METHOD_NOT_IMPLEMENTED,u=q.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;a.r(18919)(y,j);var v=o.errorOrDestroy,w=["error","close","destroy","pause","resume"];function x(b,c,e){d=d||a.r(71164),b=b||{},"boolean"!=typeof e&&(e=c instanceof d),this.objectMode=!!b.objectMode,e&&(this.objectMode=this.objectMode||!!b.readableObjectMode),this.highWaterMark=p(this,b,"readableHighWaterMark",e),this.buffer=new n,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==b.emitClose,this.autoDestroy=!!b.autoDestroy,this.destroyed=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(f||(f=a.f({string_decoder:{id:()=>5177,module:()=>a.r(5177)},"string_decoder/":{id:()=>5177,module:()=>a.r(5177)}})("string_decoder/").StringDecoder),this.decoder=new f(b.encoding),this.encoding=b.encoding)}function y(b){if(d=d||a.r(71164),!(this instanceof y))return new y(b);var c=this instanceof d;this._readableState=new x(b,this,c),this.readable=!0,b&&("function"==typeof b.read&&(this._read=b.read),"function"==typeof b.destroy&&(this._destroy=b.destroy)),j.call(this)}function z(a,b,c,d,f){e("readableAddChunk",b);var g,h,i=a._readableState;if(null===b)i.reading=!1,function(a,b){if(e("onEofChunk"),!b.ended){if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,b.sync?C(a):(b.needReadable=!1,b.emittedReadable||(b.emittedReadable=!0,D(a)))}}(a,i);else if(f||(h=function(a,b){var c;return k.isBuffer(b)||b instanceof l||"string"==typeof b||void 0===b||a.objectMode||(c=new r("chunk",["string","Buffer","Uint8Array"],b)),c}(i,b)),h)v(a,h);else if(i.objectMode||b&&b.length>0)if("string"==typeof b||i.objectMode||Object.getPrototypeOf(b)===k.prototype||(g=b,b=k.from(g)),d)i.endEmitted?v(a,new u):A(a,i,b,!0);else if(i.ended)v(a,new s);else{if(i.destroyed)return!1;i.reading=!1,i.decoder&&!c?(b=i.decoder.write(b),i.objectMode||0!==b.length?A(a,i,b,!1):E(a,i)):A(a,i,b,!1)}else d||(i.reading=!1,E(a,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function A(a,b,c,d){b.flowing&&0===b.length&&!b.sync?(b.awaitDrain=0,a.emit("data",c)):(b.length+=b.objectMode?1:c.length,d?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&C(a)),E(a,b)}function B(a,b){var c;if(a<=0||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(a!=a)if(b.flowing&&b.length)return b.buffer.head.data.length;else return b.length;return(a>b.highWaterMark&&((c=a)>=0x40000000?c=0x40000000:(c--,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c++),b.highWaterMark=c),a<=b.length)?a:b.ended?b.length:(b.needReadable=!0,0)}function C(a){var b=a._readableState;e("emitReadable",b.needReadable,b.emittedReadable),b.needReadable=!1,b.emittedReadable||(e("emitReadable",b.flowing),b.emittedReadable=!0,process.nextTick(D,a))}function D(a){var b=a._readableState;e("emitReadable_",b.destroyed,b.length,b.ended),!b.destroyed&&(b.length||b.ended)&&(a.emit("readable"),b.emittedReadable=!1),b.needReadable=!b.flowing&&!b.ended&&b.length<=b.highWaterMark,J(a)}function E(a,b){b.readingMore||(b.readingMore=!0,process.nextTick(F,a,b))}function F(a,b){for(;!b.reading&&!b.ended&&(b.length<b.highWaterMark||b.flowing&&0===b.length);){var c=b.length;if(e("maybeReadMore read 0"),a.read(0),c===b.length)break}b.readingMore=!1}function G(a){var b=a._readableState;b.readableListening=a.listenerCount("readable")>0,b.resumeScheduled&&!b.paused?b.flowing=!0:a.listenerCount("data")>0&&a.resume()}function H(a){e("readable nexttick read 0"),a.read(0)}function I(a,b){e("resume",b.reading),b.reading||a.read(0),b.resumeScheduled=!1,a.emit("resume"),J(a),b.flowing&&!b.reading&&a.read(0)}function J(a){var b=a._readableState;for(e("flow",b.flowing);b.flowing&&null!==a.read(););}function K(a,b){var c;return 0===b.length?null:(b.objectMode?c=b.buffer.shift():!a||a>=b.length?(c=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.first():b.buffer.concat(b.length),b.buffer.clear()):c=b.buffer.consume(a,b.decoder),c)}function L(a){var b=a._readableState;e("endReadable",b.endEmitted),b.endEmitted||(b.ended=!0,process.nextTick(M,b,a))}function M(a,b){if(e("endReadableNT",a.endEmitted,a.length),!a.endEmitted&&0===a.length&&(a.endEmitted=!0,b.readable=!1,b.emit("end"),a.autoDestroy)){var c=b._writableState;(!c||c.autoDestroy&&c.finished)&&b.destroy()}}function N(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return -1}Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}}),y.prototype.destroy=o.destroy,y.prototype._undestroy=o.undestroy,y.prototype._destroy=function(a,b){b(a)},y.prototype.push=function(a,b){var c,d=this._readableState;return d.objectMode?c=!0:"string"==typeof a&&((b=b||d.defaultEncoding)!==d.encoding&&(a=k.from(a,b),b=""),c=!0),z(this,a,b,!1,c)},y.prototype.unshift=function(a){return z(this,a,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(b){f||(f=a.f({string_decoder:{id:()=>5177,module:()=>a.r(5177)},"string_decoder/":{id:()=>5177,module:()=>a.r(5177)}})("string_decoder/").StringDecoder);var c=new f(b);this._readableState.decoder=c,this._readableState.encoding=this._readableState.decoder.encoding;for(var d=this._readableState.buffer.head,e="";null!==d;)e+=c.write(d.data),d=d.next;return this._readableState.buffer.clear(),""!==e&&this._readableState.buffer.push(e),this._readableState.length=e.length,this},y.prototype.read=function(a){e("read",a),a=parseInt(a,10);var b,c=this._readableState,d=a;if(0!==a&&(c.emittedReadable=!1),0===a&&c.needReadable&&((0!==c.highWaterMark?c.length>=c.highWaterMark:c.length>0)||c.ended))return e("read: emitReadable",c.length,c.ended),0===c.length&&c.ended?L(this):C(this),null;if(0===(a=B(a,c))&&c.ended)return 0===c.length&&L(this),null;var f=c.needReadable;return e("need readable",f),(0===c.length||c.length-a<c.highWaterMark)&&e("length less than watermark",f=!0),c.ended||c.reading?e("reading or ended",f=!1):f&&(e("do read"),c.reading=!0,c.sync=!0,0===c.length&&(c.needReadable=!0),this._read(c.highWaterMark),c.sync=!1,c.reading||(a=B(d,c))),null===(b=a>0?K(a,c):null)?(c.needReadable=c.length<=c.highWaterMark,a=0):(c.length-=a,c.awaitDrain=0),0===c.length&&(c.ended||(c.needReadable=!0),d!==a&&c.ended&&L(this)),null!==b&&this.emit("data",b),b},y.prototype._read=function(a){v(this,new t("_read()"))},y.prototype.pipe=function(a,b){var c,d=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=a;break;case 1:f.pipes=[f.pipes,a];break;default:f.pipes.push(a)}f.pipesCount+=1,e("pipe count=%d opts=%j",f.pipesCount,b);var g=b&&!1===b.end||a===process.stdout||a===process.stderr?p:h;function h(){e("onend"),a.end()}f.endEmitted?process.nextTick(g):d.once("end",g),a.on("unpipe",function b(c,g){e("onunpipe"),c===d&&g&&!1===g.hasUnpiped&&(g.hasUnpiped=!0,e("cleanup"),a.removeListener("close",n),a.removeListener("finish",o),a.removeListener("drain",j),a.removeListener("error",m),a.removeListener("unpipe",b),d.removeListener("end",h),d.removeListener("end",p),d.removeListener("data",l),k=!0,f.awaitDrain&&(!a._writableState||a._writableState.needDrain)&&j())});var j=(c=d,function(){var a=c._readableState;e("pipeOnDrain",a.awaitDrain),a.awaitDrain&&a.awaitDrain--,0===a.awaitDrain&&i(c,"data")&&(a.flowing=!0,J(c))});a.on("drain",j);var k=!1;function l(b){e("ondata");var c=a.write(b);e("dest.write",c),!1===c&&((1===f.pipesCount&&f.pipes===a||f.pipesCount>1&&-1!==N(f.pipes,a))&&!k&&(e("false write response, pause",f.awaitDrain),f.awaitDrain++),d.pause())}function m(b){e("onerror",b),p(),a.removeListener("error",m),0===i(a,"error")&&v(a,b)}function n(){a.removeListener("finish",o),p()}function o(){e("onfinish"),a.removeListener("close",n),p()}function p(){e("unpipe"),d.unpipe(a)}return d.on("data",l),!function(a,b,c){if("function"==typeof a.prependListener)return a.prependListener(b,c);a._events&&a._events[b]?Array.isArray(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]]:a.on(b,c)}(a,"error",m),a.once("close",n),a.once("finish",o),a.emit("pipe",d),f.flowing||(e("pipe resume"),d.resume()),a},y.prototype.unpipe=function(a){var b=this._readableState,c={hasUnpiped:!1};if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes||(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this,c)),this;if(!a){var d=b.pipes,e=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var f=0;f<e;f++)d[f].emit("unpipe",this,{hasUnpiped:!1});return this}var g=N(b.pipes,a);return -1===g||(b.pipes.splice(g,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this,c)),this},y.prototype.on=function(a,b){var c=j.prototype.on.call(this,a,b),d=this._readableState;return"data"===a?(d.readableListening=this.listenerCount("readable")>0,!1!==d.flowing&&this.resume()):"readable"!==a||d.endEmitted||d.readableListening||(d.readableListening=d.needReadable=!0,d.flowing=!1,d.emittedReadable=!1,e("on readable",d.length,d.reading),d.length?C(this):d.reading||process.nextTick(H,this)),c},y.prototype.addListener=y.prototype.on,y.prototype.removeListener=function(a,b){var c=j.prototype.removeListener.call(this,a,b);return"readable"===a&&process.nextTick(G,this),c},y.prototype.removeAllListeners=function(a){var b=j.prototype.removeAllListeners.apply(this,arguments);return("readable"===a||void 0===a)&&process.nextTick(G,this),b},y.prototype.resume=function(){var a,b,c=this._readableState;return c.flowing||(e("resume"),c.flowing=!c.readableListening,a=this,(b=c).resumeScheduled||(b.resumeScheduled=!0,process.nextTick(I,a,b))),c.paused=!1,this},y.prototype.pause=function(){return e("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(e("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},y.prototype.wrap=function(a){var b=this,c=this._readableState,d=!1;for(var f in a.on("end",function(){if(e("wrapped end"),c.decoder&&!c.ended){var a=c.decoder.end();a&&a.length&&b.push(a)}b.push(null)}),a.on("data",function(f){if(e("wrapped data"),c.decoder&&(f=c.decoder.write(f)),!c.objectMode||null!=f)(c.objectMode||f&&f.length)&&(b.push(f)||(d=!0,a.pause()))}),a)void 0===this[f]&&"function"==typeof a[f]&&(this[f]=function(b){return function(){return a[b].apply(a,arguments)}}(f));for(var g=0;g<w.length;g++)a.on(w[g],this.emit.bind(this,w[g]));return this._read=function(b){e("wrapped _read",b),d&&(d=!1,a.resume())},this},"function"==typeof Symbol&&(y.prototype[Symbol.asyncIterator]=function(){return void 0===g&&(g=a.r(5184)),g(this)}),Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(y.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(y.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}}),y._fromList=K,Object.defineProperty(y.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(y.from=function(b,c){return void 0===h&&(h=a.r(39916)),h(y,b,c)})},87073,(a,b,c)=>{"use strict";b.exports=k;var d=a.r(86609).codes,e=d.ERR_METHOD_NOT_IMPLEMENTED,f=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_TRANSFORM_ALREADY_TRANSFORMING,h=d.ERR_TRANSFORM_WITH_LENGTH_0,i=a.r(71164);function j(a,b){var c=this._transformState;c.transforming=!1;var d=c.writecb;if(null===d)return this.emit("error",new f);c.writechunk=null,c.writecb=null,null!=b&&this.push(b),d(a);var e=this._readableState;e.reading=!1,(e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}function k(a){if(!(this instanceof k))return new k(a);i.call(this,a),this._transformState={afterTransform:j.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.on("prefinish",l)}function l(){var a=this;"function"!=typeof this._flush||this._readableState.destroyed?m(this,null,null):this._flush(function(b,c){m(a,b,c)})}function m(a,b,c){if(b)return a.emit("error",b);if(null!=c&&a.push(c),a._writableState.length)throw new h;if(a._transformState.transforming)throw new g;return a.push(null)}a.r(18919)(k,i),k.prototype.push=function(a,b){return this._transformState.needTransform=!1,i.prototype.push.call(this,a,b)},k.prototype._transform=function(a,b,c){c(new e("_transform()"))},k.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},k.prototype._read=function(a){var b=this._transformState;null===b.writechunk||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))},k.prototype._destroy=function(a,b){i.prototype._destroy.call(this,a,function(a){b(a)})}},58888,(a,b,c)=>{"use strict";b.exports=e;var d=a.r(87073);function e(a){if(!(this instanceof e))return new e(a);d.call(this,a)}a.r(18919)(e,d),e.prototype._transform=function(a,b,c){c(null,a)}},9549,(a,b,c)=>{"use strict";var d,e=a.r(86609).codes,f=e.ERR_MISSING_ARGS,g=e.ERR_STREAM_DESTROYED;function h(a){if(a)throw a}function i(a){a()}function j(a,b){return a.pipe(b)}b.exports=function(){for(var b,c,e=arguments.length,k=Array(e),l=0;l<e;l++)k[l]=arguments[l];var m=(b=k).length&&"function"==typeof b[b.length-1]?b.pop():h;if(Array.isArray(k[0])&&(k=k[0]),k.length<2)throw new f("streams");var n=k.map(function(b,e){var f,h,j,l,o,p,q=e<k.length-1;return f=e>0,j=h=function(a){c||(c=a),a&&n.forEach(i),q||(n.forEach(i),m(c))},l=!1,h=function(){l||(l=!0,j.apply(void 0,arguments))},o=!1,b.on("close",function(){o=!0}),void 0===d&&(d=a.r(42603)),d(b,{readable:q,writable:f},function(a){if(a)return h(a);o=!0,h()}),p=!1,function(a){if(!o&&!p){if(p=!0,b.setHeader&&"function"==typeof b.abort)return b.abort();if("function"==typeof b.destroy)return b.destroy();h(a||new g("pipe"))}}});return k.reduce(j)}},13481,(a,b,c)=>{var d=a.r(88947);"disable"===process.env.READABLE_STREAM&&d?(b.exports=d.Readable,Object.assign(b.exports,d),b.exports.Stream=d):((c=b.exports=a.r(13597)).Stream=d||c,c.Readable=c,c.Writable=a.r(20676),c.Duplex=a.r(71164),c.Transform=a.r(87073),c.PassThrough=a.r(58888),c.finished=a.r(42603),c.pipeline=a.r(9549))},65998,(a,b,c)=>{let d;b.exports="function"==typeof queueMicrotask?queueMicrotask.bind(a.g):a=>(d||(d=Promise.resolve())).then(a).catch(a=>setTimeout(()=>{throw a},0))},45033,(a,b,c)=>{"use strict";function d(a,b){for(let c in b)Object.defineProperty(a,c,{value:b[c],enumerable:!0,configurable:!0});return a}b.exports=function(a,b,c){if(!a||"string"==typeof a)throw TypeError("Please pass an Error to err-code");c||(c={}),"object"==typeof b&&(c=b,b=""),b&&(c.code=b);try{return d(a,c)}catch(e){c.message=a.message,c.stack=a.stack;let b=function(){};return b.prototype=Object.create(Object.getPrototypeOf(a)),d(new b,c)}}},92173,(a,b,c)=>{let d=a.r(35290)("simple-peer"),e=a.r(49409),f=a.r(98326),g=a.r(13481),h=a.r(65998),i=a.r(45033),{Buffer:j}=a.r(874);function k(a){return a.replace(/a=ice-options:trickle\s\n/g,"")}class l extends g.Duplex{constructor(a){if(super(a=Object.assign({allowHalfOpen:!1},a)),this._id=f(4).toString("hex").slice(0,7),this._debug("new peer %o",a),this.channelName=a.initiator?a.channelName||f(20).toString("hex"):null,this.initiator=a.initiator||!1,this.channelConfig=a.channelConfig||l.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},l.config,a.config),this.offerOptions=a.offerOptions||{},this.answerOptions=a.answerOptions||{},this.sdpTransform=a.sdpTransform||(a=>a),this.streams=a.streams||(a.stream?[a.stream]:[]),this.trickle=void 0===a.trickle||a.trickle,this.allowHalfTrickle=void 0!==a.allowHalfTrickle&&a.allowHalfTrickle,this.iceCompleteTimeout=a.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=a.wrtc&&"object"==typeof a.wrtc?a.wrtc:e(),!this._wrtc)throw i(Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(a){this.destroy(i(a,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=a=>{this._onIceCandidate(a)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch(a=>{this.destroy(i(a,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=a=>{this._setupData(a)},this.streams&&this.streams.forEach(a=>{this.addStream(a)}),this._pc.ontrack=a=>{this._onTrack(a)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(a){if(!this.destroying){if(this.destroyed)throw i(Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof a)try{a=JSON.parse(a)}catch(b){a={}}this._debug("signal()"),a.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),a.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(a.transceiverRequest.kind,a.transceiverRequest.init)),a.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(a.candidate):this._pendingCandidates.push(a.candidate)),a.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(a)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(a=>{this._addIceCandidate(a)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(a=>{this.destroy(i(a,"ERR_SET_REMOTE_DESCRIPTION"))}),a.sdp||a.candidate||a.renegotiate||a.transceiverRequest||this.destroy(i(Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(a){let b=new this._wrtc.RTCIceCandidate(a);this._pc.addIceCandidate(b).catch(a=>{!b.address||b.address.endsWith(".local")?console.warn("Ignoring unsupported ICE candidate."):this.destroy(i(a,"ERR_ADD_ICE_CANDIDATE"))})}send(a){if(!this.destroying){if(this.destroyed)throw i(Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(a)}}addTransceiver(a,b){if(!this.destroying){if(this.destroyed)throw i(Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(a,b),this._needsNegotiation()}catch(a){this.destroy(i(a,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:a,init:b}})}}addStream(a){if(!this.destroying){if(this.destroyed)throw i(Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),a.getTracks().forEach(b=>{this.addTrack(b,a)})}}addTrack(a,b){if(this.destroying)return;if(this.destroyed)throw i(Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");let c=this._senderMap.get(a)||new Map,d=c.get(b);if(d)if(d.removed)throw i(Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED");else throw i(Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");d=this._pc.addTrack(a,b),c.set(b,d),this._senderMap.set(a,c),this._needsNegotiation()}replaceTrack(a,b,c){if(this.destroying)return;if(this.destroyed)throw i(Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");let d=this._senderMap.get(a),e=d?d.get(c):null;if(!e)throw i(Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");b&&this._senderMap.set(b,d),null!=e.replaceTrack?e.replaceTrack(b):this.destroy(i(Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(a,b){if(this.destroying)return;if(this.destroyed)throw i(Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");let c=this._senderMap.get(a),d=c?c.get(b):null;if(!d)throw i(Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{d.removed=!0,this._pc.removeTrack(d)}catch(a){"NS_ERROR_UNEXPECTED"===a.name?this._sendersAwaitingStable.push(d):this.destroy(i(a,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(a){if(!this.destroying){if(this.destroyed)throw i(Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),a.getTracks().forEach(b=>{this.removeTrack(b,a)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,h(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw i(Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(a){this._destroy(a,()=>{})}_destroy(a,b){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",a&&(a.message||a)),h(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",a&&(a.message||a)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(a){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(a){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,a&&this.emit("error",a),this.emit("close"),b()}))}_setupData(a){if(!a.channel)return this.destroy(i(Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=a.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=65536),this.channelName=this._channel.label,this._channel.onmessage=a=>{this._onChannelMessage(a)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=a=>{let b=a.error instanceof Error?a.error:Error(`Datachannel error: ${a.message} ${a.filename}:${a.lineno}:${a.colno}`);this.destroy(i(b,"ERR_DATA_CHANNEL"))};let b=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(b&&this._onChannelClose(),b=!0):b=!1},5e3)}_read(){}_write(a,b,c){if(this.destroyed)return c(i(Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(a)}catch(a){return this.destroy(i(a,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=c):c(null)}else this._debug("write before connect"),this._chunk=a,this._cb=c}_onFinish(){if(this.destroyed)return;let a=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?a():this.once("connect",a)}_startIceCompleteTimeout(){!this.destroyed&&(this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout)))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(a=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(a.sdp=k(a.sdp)),a.sdp=this.sdpTransform(a.sdp);let b=()=>{if(this.destroyed)return;let b=this._pc.localDescription||a;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp})},c=()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?b():this.once("_iceComplete",b))},d=a=>{this.destroy(i(a,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(a).then(c).catch(d)}).catch(a=>{this.destroy(i(a,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(a=>{a.mid||!a.sender.track||a.requested||(a.requested=!0,this.addTransceiver(a.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(a=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(a.sdp=k(a.sdp)),a.sdp=this.sdpTransform(a.sdp);let b=()=>{if(this.destroyed)return;let b=this._pc.localDescription||a;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp}),this.initiator||this._requestMissingTransceivers()},c=()=>{this.destroyed||(this.trickle||this._iceComplete?b():this.once("_iceComplete",b))},d=a=>{this.destroy(i(a,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(a).then(c).catch(d)}).catch(a=>{this.destroy(i(a,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(i(Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;let a=this._pc.iceConnectionState,b=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",a,b),this.emit("iceStateChange",a,b),("connected"===a||"completed"===a)&&(this._pcReady=!0,this._maybeReady()),"failed"===a&&this.destroy(i(Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===a&&this.destroy(i(Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(a){let b=a=>("[object Array]"===Object.prototype.toString.call(a.values)&&a.values.forEach(b=>{Object.assign(a,b)}),a);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(c=>{let d=[];c.forEach(a=>{d.push(b(a))}),a(null,d)},b=>a(b)):this._pc.getStats.length>0?this._pc.getStats(c=>{if(this.destroyed)return;let d=[];c.result().forEach(a=>{let c={};a.names().forEach(b=>{c[b]=a.stat(b)}),c.id=a.id,c.type=a.type,c.timestamp=a.timestamp,d.push(b(c))}),a(null,d)},b=>a(b)):a(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let a=()=>{this.destroyed||this.getStats((b,c)=>{if(this.destroyed)return;b&&(c=[]);let d={},e={},f={},g=!1;c.forEach(a=>{("remotecandidate"===a.type||"remote-candidate"===a.type)&&(d[a.id]=a),("localcandidate"===a.type||"local-candidate"===a.type)&&(e[a.id]=a),("candidatepair"===a.type||"candidate-pair"===a.type)&&(f[a.id]=a)});let h=a=>{g=!0;let b=e[a.localCandidateId];b&&(b.ip||b.address)?(this.localAddress=b.ip||b.address,this.localPort=Number(b.port)):b&&b.ipAddress?(this.localAddress=b.ipAddress,this.localPort=Number(b.portNumber)):"string"==typeof a.googLocalAddress&&(b=a.googLocalAddress.split(":"),this.localAddress=b[0],this.localPort=Number(b[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let c=d[a.remoteCandidateId];c&&(c.ip||c.address)?(this.remoteAddress=c.ip||c.address,this.remotePort=Number(c.port)):c&&c.ipAddress?(this.remoteAddress=c.ipAddress,this.remotePort=Number(c.portNumber)):"string"==typeof a.googRemoteAddress&&(c=a.googRemoteAddress.split(":"),this.remoteAddress=c[0],this.remotePort=Number(c[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(c.forEach(a=>{"transport"===a.type&&a.selectedCandidatePairId&&h(f[a.selectedCandidatePairId]),("googCandidatePair"===a.type&&"true"===a.googActiveConnection||("candidatepair"===a.type||"candidate-pair"===a.type)&&a.selected)&&h(a)}),!g&&(!Object.keys(f).length||Object.keys(e).length))return void setTimeout(a,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(a){return this.destroy(i(a,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');let a=this._cb;this._cb=null,a(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};a()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>65536)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(a=>{this._pc.removeTrack(a),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(a){!this.destroyed&&(a.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:a.candidate.candidate,sdpMLineIndex:a.candidate.sdpMLineIndex,sdpMid:a.candidate.sdpMid}}):a.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),a.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(a){if(this.destroyed)return;let b=a.data;b instanceof ArrayBuffer&&(b=j.from(b)),this.push(b)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);let a=this._cb;this._cb=null,a(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(a){this.destroyed||a.streams.forEach(b=>{this._debug("on track"),this.emit("track",a.track,b),this._remoteTracks.push({track:a.track,stream:b}),this._remoteStreams.some(a=>a.id===b.id)||(this._remoteStreams.push(b),h(()=>{this._debug("on stream"),this.emit("stream",b)}))})}_debug(){let a=[].slice.call(arguments);a[0]="["+this._id+"] "+a[0],d.apply(null,a)}}l.WEBRTC_SUPPORT=!!e(),l.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},l.channelConfig={},b.exports=l},93372,a=>{"use strict";a.s(["ContextProvider",()=>k,"SocketContext",()=>e]);var b=a.i(87924),c=a.i(72131),d=a.i(92173);let e=(0,c.createContext)({call:{},callAccepted:!1,myVideo:c.default.createRef(),userVideo:c.default.createRef(),stream:null,name:"",setName:()=>{},callEnded:!1,me:"",callUser:()=>{},leaveCall:()=>{},answerCall:()=>{},sendData:()=>{},receivedFiles:[],receivedTexts:[],connectionRef:c.default.createRef()}),f=null,g={},h=a=>{f&&f.readyState===WebSocket.OPEN&&f.close(),(f=new WebSocket(a.replace(/^http/,"ws"))).onopen=()=>{console.log("WebSocket connected")},f.onmessage=a=>{try{let b=JSON.parse(a.data);b.type&&g[b.type]&&g[b.type].forEach(a=>a(b))}catch(a){console.error("Error parsing WebSocket message:",a)}},f.onerror=a=>{console.error("WebSocket error:",a)},f.onclose=()=>{console.log("WebSocket disconnected"),setTimeout(()=>h(a),3e3)}},i=(a,b)=>{f&&f.readyState===WebSocket.OPEN?f.send(JSON.stringify({type:a,...b})):console.error("WebSocket not connected")},j=(a,b)=>(g[a]||(g[a]=[]),g[a].push(b),()=>{g[a]=g[a].filter(a=>a!==b)});h("http://localhost:3003");let k=({children:a})=>{let[g]=(0,c.useState)(null),[h,k]=(0,c.useState)(""),[l,m]=(0,c.useState)({}),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]),x=(0,c.useRef)(null),y=(0,c.useRef)(null),z=(0,c.useRef)(null);(0,c.useEffect)(()=>{let a=(()=>{let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",b="";for(let c=0;c<5;c++)b+=a.charAt(Math.floor(Math.random()*a.length));return b})();k(a);let b=()=>{i("registerShortId",{shortId:a}),console.log("Registered short ID:",a)};if(f&&f.readyState===WebSocket.OPEN)b();else{let a=setInterval(()=>{f&&f.readyState===WebSocket.OPEN&&(b(),clearInterval(a))},100)}let c=j("me",a=>{console.log("Server socket ID:",a.id)}),d=j("calluser",a=>{m({isReceivingCall:!0,from:a.from,name:a.name,signal:a.signal})}),e=j("callended",()=>{A()});return()=>{c(),d(),e()}},[]);let A=()=>{q(!0),z.current&&(z.current.destroy(),z.current=null),m({}),o(!1)},B=a=>{let b=new TextDecoder().decode(a);try{let a=JSON.parse(b);if("text"===a.type)w(b=>[...b,a.payload]);else if("file"===a.type){let b=new Blob([a.payload.file],{type:a.payload.type}),c=URL.createObjectURL(b);u(b=>[...b,{name:a.payload.name,url:c,type:a.payload.type}])}}catch{w(a=>[...a,b])}};return(0,b.jsx)(e.Provider,{value:{call:l,callAccepted:n,myVideo:x,userVideo:y,stream:g,name:r,setName:s,callEnded:p,me:h,callUser:a=>{let b=new d.default({initiator:!0,trickle:!1,stream:g||void 0});b.on("signal",b=>{i("calluser",{userToCall:a,signalData:b,from:h,name:r})}),b.on("stream",a=>{y.current&&(y.current.srcObject=a)}),b.on("data",a=>{B(a)});let c=j("callaccepted",a=>{o(!0),b.signal(JSON.stringify(a.signal)),c()});z.current=b},leaveCall:A,answerCall:()=>{o(!0);let a=new d.default({initiator:!1,trickle:!1,stream:g||void 0});a.on("signal",a=>{i("answercall",{signal:a,to:l.from})}),a.on("stream",a=>{y.current&&(y.current.srcObject=a)}),a.on("data",a=>{B(a)}),l.signal&&a.signal(JSON.stringify(l.signal)),z.current=a},sendData:a=>{if(z.current&&n)try{z.current.send(a)}catch(a){console.error("Error sending data:",a)}else console.log("Connection not ready to send data")},receivedFiles:t,receivedTexts:v,connectionRef:z},children:a})}},62371,a=>{"use strict";a.s(["I18nProvider",()=>h,"useI18n",()=>i]);var b=a.i(87924),c=a.i(72131),d=a.i(76488),e=a.i(40582);let f={en:d.default,zh:e.default},g=(0,c.createContext)(null),h=({children:a})=>{let[d,e]=(0,c.useState)("en");return(0,b.jsx)(g.Provider,{value:{locale:d,setLocale:e,t:(a,b)=>{let c=f[d][a]||a;return b&&Object.keys(b).forEach(a=>{c=c.replace(`{${a}}`,String(b[a]))}),c}},children:a})},i=()=>{let a=(0,c.useContext)(g);if(!a)throw Error("useI18n must be used within an I18nProvider");return a}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__42aea391._.js.map